name: Update Cat Photo ğŸ±

# ì–¸ì œ ì‹¤í–‰í• ê¹Œìš”?
on:
  schedule:
    - cron: '0 0 * * *'  # ë§¤ì¼ ìì • (UTC ê¸°ì¤€) -> í•œêµ­ ì‹œê°„ ì•„ì¹¨ 9ì‹œ
  workflow_dispatch:     # ìˆ˜ë™ ì‹¤í–‰ ë²„íŠ¼ (í…ŒìŠ¤íŠ¸ìš©)

permissions:
  contents: write        # ê¹ƒí—ˆë¸Œ ë´‡ì´ ë¦¬í¬ì§€í† ë¦¬ì— ê¸€ì„ ì“¸ ê¶Œí•œ ë¶€ì—¬

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
    # 1. ë‚´ ì½”ë“œ ë‚´ë ¤ë°›ê¸°
    - name: Checkout code
      uses: actions/checkout@v4

    # 2. íŒŒì´ì¬ ì„¤ì¹˜í•˜ê¸°
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    # 3. í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ (requests)
    - name: Install dependencies
      run: |
        pip install -r requirements.txt

    # 4. íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (README ìˆ˜ì •ë¨)
    - name: Run update script
      run: python update_cat.py

    # 5. ë³€ê²½ëœ ë‚´ìš© ì €ì¥í•˜ê³  ê¹ƒí—ˆë¸Œì— ì˜¬ë¦¬ê¸°
    - name: Commit and Push changes
      run: |
        git config --global user.name "github-actions[bot]"
        git config --global user.email "github-actions[bot]@users.noreply.github.com"
        git add README.md
        git commit -m "ğŸ± Update random cat image" || echo "ë³€ê²½ëœ ë‚´ìš©ì´ ì—†ì–´ì„œ ì»¤ë°‹í•˜ì§€ ì•ŠìŒ"
        git push